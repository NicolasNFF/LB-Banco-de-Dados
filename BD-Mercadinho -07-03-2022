Exemplo 1

IF NOT EXISTS (SELECT * FROM SYS.databases WHERE NAME='MERCADINHO')
BEGIN
    CREATE DATABASE MERCADINHO;
	END
  
  Exemplo2 USE MERCADINHO;
	CREATE TABLE MER_PRODUTO(
	PRO_IN_CODIGO INT NOT NULL IDENTITY
		CONSTRAINT MER_PK_PRODUTO PRIMARY KEY,
	PRO_CH_BARRAS CHAR(13) NOT NULL CONSTRAINT MER_CK_BARRAS CHECK(PRO_CH_BARRAS LIKE 
	'[0-9][0-9][0-9][0-9][0-9][.][0-9][0-9][0-9][0-9][0-9][-][0-9]')
		CONSTRAINT MER_UK_BARRAS UNIQUE,
	PRO_ST_NOME VARCHAR(100) NOT NULL,
	PRO_RE_PRECO NUMERIC(10,2) NOT NULL CONSTRAINT MER_DF_PRECO DEFAULT 0
		CONSTRAINT MER_CK_PRECO CHECK(PRO_RE_PRECO >=0),
	PRO_DT_INCLUSAO SMALLDATETIME NOT NULL
		CONSTRAINT MER_DF_INCLUSAO DEFAULT GETDATE(),
	PRO_CH_ATIVO CHAR(3) NOT NULL CONSTRAINT MER_DF_ATIVO DEFAULT 'SIM'
		CONSTRAINT MER_CK_ATIVO CHECK(PRO_CH_ATIVO IN ('SIM','NÃO'))
);

INSERT INTO MER_PRODUTO (PRO_CH_BARRAS, PRO_ST_NOME)
VALUES ('12345.6789-1','PÃO AMANHECIDO');
SELECT * FROM MER_PRODUTO;


INSERT INTO MER_PRODUTO (PRO_CH_BARRAS, PRO_ST_NOME, PRO_RE_PRECO)
VALUES ('98765.43210-9','PRODUTO NEGATIVO', 10);


INSERT INTO MER_PRODUTO (PRO_CH_BARRAS, PRO_ST_NOME, PRO_RE_PRECO, PRO_CH_ATIVO)
VALUES ('98765.43211-4','PRESUNTO PARMA', 100, 'NÃO');


SELECT *FROM MER_PRODUTO;


---EXEMPLO3

--DROP PROCEDURE dbo.SP_S_MER_PRODUTO;
CREATE PROCEDURE dbo.SP_S_MER_PRODUTO

@PRODUTO VARCHAR(100)
AS

SELECT
	PRO.PRO_CH_BARRAS,
	PRO.PRO_ST_NOME,
	PRO.PRO_RE_PRECO,
	PRO.PRO_DT_INCLUSAO,
	PRO.PRO_CH_ATIVO


FROM
	MER_PRODUTO AS PRO

WHERE
	PRO.PRO_ST_NOME LIKE @PRODUTO

	ORDER BY
		PRO.PRO_ST_NOME ASC

EXEC SP_S_MER_PRODUTO 'PRESUNTO PARMA'

SP_S_MER_PRODUTO 'PRESUNTO PARMA' --EXEC É OPCIONAL


EXEMPLO 4

--DROP PROCEDURE dbo.SP_S_MER_PRODUTO;
CREATE OR ALTER PROCEDURE dbo.SP_S_MER_PRODUTO

@PRODUTO VARCHAR(100)
AS

SELECT
	PRO.PRO_CH_BARRAS,
	PRO.PRO_ST_NOME,
	PRO.PRO_RE_PRECO,
	PRO.PRO_DT_INCLUSAO,
	PRO.PRO_CH_ATIVO


FROM
	MER_PRODUTO AS PRO

WHERE
	PRO.PRO_ST_NOME LIKE '%'+@PRODUTO+'%' --CONCATENADO

	ORDER BY
		PRO.PRO_ST_NOME ASC

EXEC SP_S_MER_PRODUTO 'PRESUNTO PARMA'

SP_S_MER_PRODUTO 'PRESUNTO' --EXEC É OPCIONAL



  
  
